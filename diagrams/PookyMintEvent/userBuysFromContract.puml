@startuml
participant User
box #F0F8FF
participant PookyMintEvent
participant PookyballMinter
end box
participant Pookyball
participant ChainlinkVRF

group User Transaction
  User -> PookyMintEvent : mintBalls\n(templateId, numberOfBalls)
  group loop [numberOfBalls times]
    PookyMintEvent -> PookyballMinter : _requestMintFromTemplate\n(templateId)
    PookyballMinter -> Pookyball : mintBall
    Pookyball --> PookyballMinter : ball minted
    PookyballMinter -> ChainlinkVRF : requestRandomWords
  end
end

group Chainlink Callback Transaction
  ChainlinkVRF -> PookyballMinter : fulfillRandomWords
  PookyballMinter -> Pookyball : setRandomEntropy
  PookyballMinter -> User : transfer ball
end

@enduml
